<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow Pro - Advanced Project Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=VT323&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --matrix-green: #00ff00;
            --pure-black: #000000;
            --dark-green: #003300;
            --danger: #ff0000;
            --warning: #ffff00;
            --info: #00ffff;
            --critical: #ff00ff;
        }

        body {
            font-family: 'Courier Prime', monospace;
            background: var(--pure-black);
            color: var(--matrix-green);
            overflow-x: hidden;
            min-height: 100vh;
        }

        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 1000;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.97; }
            50% { opacity: 1; }
            100% { opacity: 0.97; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--matrix-green);
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-family: 'VT323', monospace;
            font-size: clamp(2.5rem, 8vw, 4rem);
            margin-bottom: 0.5rem;
            letter-spacing: 0.1em;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.8;
            letter-spacing: 0.05em;
        }

        .terminal-box {
            background: var(--pure-black);
            border: 2px solid var(--matrix-green);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--matrix-green);
        }

        .terminal-title {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            background: var(--matrix-green);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Dashboard Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--pure-black);
            border: 1px solid var(--matrix-green);
            padding: 1.2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: var(--pure-black);
        }

        .stat-icon {
            width: 32px;
            height: 32px;
            margin: 0 auto 0.5rem;
            stroke: var(--matrix-green);
            stroke-width: 2;
            fill: none;
        }

        .stat-value {
            font-family: 'VT323', monospace;
            font-size: 2.5rem;
            margin-bottom: 0.3rem;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        textarea,
        select {
            padding: 0.7rem 1rem;
            background: var(--pure-black);
            border: 2px solid var(--matrix-green);
            color: var(--matrix-green);
            font-family: 'Courier Prime', monospace;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        textarea:focus,
        select:focus {
            background: var(--pure-black);
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: rgba(0, 255, 0, 0.5);
        }

        .search-box {
            flex: 1;
            min-width: 200px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding-left: 2.5rem;
        }

        .search-icon {
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            stroke: var(--matrix-green);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }

        select {
            cursor: pointer;
        }

        select option {
            background: var(--pure-black);
            color: var(--matrix-green);
        }

        button {
            padding: 0.7rem 1.5rem;
            background: transparent;
            color: var(--matrix-green);
            border: 2px solid var(--matrix-green);
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.05em;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:hover {
            background: var(--matrix-green);
            color: var(--pure-black);
        }

        button:hover svg {
            stroke: var(--pure-black);
        }

        button:active {
            transform: scale(0.98);
        }

        button.primary {
            background: var(--matrix-green);
            color: var(--pure-black);
        }

        button.primary svg {
            stroke: var(--pure-black);
        }

        button.primary:hover {
            background: transparent;
            color: var(--matrix-green);
        }

        button.primary:hover svg {
            stroke: var(--matrix-green);
        }

        button svg {
            width: 16px;
            height: 16px;
            stroke: var(--matrix-green);
            stroke-width: 2;
            fill: none;
            transition: stroke 0.3s ease;
        }

        button.danger svg {
            stroke: var(--danger);
        }

        button.danger:hover svg {
            stroke: var(--pure-black);
        }

        /* Task Cards */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .task-card {
            background: var(--pure-black);
            border: 1px solid var(--matrix-green);
            padding: 1.2rem;
            transition: all 0.3s ease;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .task-card:hover {
            background: var(--pure-black);
        }

        .task-card.overdue {
            border-left: 4px solid var(--danger);
        }

        .task-card.completed {
            opacity: 0.5;
            border-left: 4px solid var(--matrix-green);
        }

        .task-card.priority-high {
            border-top: 2px solid var(--warning);
        }

        .task-card.priority-critical {
            border-top: 2px solid var(--critical);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.8rem;
        }

        .task-title {
            font-family: 'VT323', monospace;
            font-size: 1.4rem;
            margin-bottom: 0.3rem;
        }

        .task-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .meta-item svg {
            width: 14px;
            height: 14px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .meta-label {
            opacity: 0.6;
        }

        .badge {
            padding: 0.2rem 0.5rem;
            font-size: 0.75rem;
            border: 1px solid;
            font-family: 'VT323', monospace;
        }

        .badge.status-todo { color: var(--info); border-color: var(--info); }
        .badge.status-progress { color: var(--warning); border-color: var(--warning); }
        .badge.status-completed { color: var(--matrix-green); border-color: var(--matrix-green); }
        .badge.status-blocked { color: var(--danger); border-color: var(--danger); }

        .badge.priority-low { color: var(--info); border-color: var(--info); }
        .badge.priority-medium { color: var(--matrix-green); border-color: var(--matrix-green); }
        .badge.priority-high { color: var(--warning); border-color: var(--warning); }
        .badge.priority-critical { color: var(--critical); border-color: var(--critical); }

        .task-description {
            opacity: 0.8;
            margin-bottom: 0.8rem;
            line-height: 1.5;
        }

        .task-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.8rem;
        }

        .tag {
            background: var(--pure-black);
            border: 1px solid var(--matrix-green);
            padding: 0.2rem 0.6rem;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .tag svg {
            width: 12px;
            height: 12px;
            stroke: var(--matrix-green);
            stroke-width: 2;
            fill: none;
        }

        .progress-section {
            margin-bottom: 0.8rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
            font-size: 0.85rem;
        }

        .progress-bar {
            height: 6px;
            background: var(--pure-black);
            border: 1px solid var(--matrix-green);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            background: var(--matrix-green);
            transition: width 0.3s ease;
        }

        .task-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .task-actions button {
            padding: 0.5rem 1rem;
            font-size: 0.95rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--pure-black);
            z-index: 2000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-content {
            background: var(--pure-black);
            border: 2px solid var(--matrix-green);
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideDown 0.3s ease-out;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--matrix-green);
        }

        .modal-header h2 {
            font-family: 'VT323', monospace;
            font-size: 1.8rem;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--matrix-green);
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn svg {
            width: 24px;
            height: 24px;
            stroke: var(--matrix-green);
            stroke-width: 2;
            fill: none;
        }

        .close-btn:hover svg {
            stroke: var(--danger);
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            opacity: 0.6;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            stroke: var(--matrix-green);
            stroke-width: 1;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--matrix-green);
            opacity: 0.6;
            font-size: 0.85rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--pure-black);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--matrix-green);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .task-header {
                flex-direction: column;
                gap: 0.5rem;
            }

            .task-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>

    <div class="container">
        <header>
            <h1>TASKFLOW PRO</h1>
            <p class="subtitle">ADVANCED PROJECT MANAGEMENT SYSTEM v2.0</p>
            <p class="subtitle" id="current-date" style="margin-top: 0.5rem;"></p>
        </header>

        <!-- Dashboard Stats -->
        <div class="stats">
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <line x1="9" y1="9" x2="15" y2="9"/>
                    <line x1="9" y1="12" x2="15" y2="12"/>
                    <line x1="9" y1="15" x2="13" y2="15"/>
                </svg>
                <div class="stat-value" id="total-tasks">0</div>
                <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                <div class="stat-value" id="progress-tasks">0</div>
                <div class="stat-label">In Progress</div>
            </div>
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <div class="stat-value" id="completed-tasks">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24" style="stroke: var(--danger);">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <div class="stat-value" id="overdue-tasks" style="color: var(--danger);">0</div>
                <div class="stat-label">Overdue</div>
            </div>
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24">
                    <line x1="18" y1="20" x2="18" y2="10"/>
                    <line x1="12" y1="20" x2="12" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="14"/>
                </svg>
                <div class="stat-value" id="completion-rate">0%</div>
                <div class="stat-label">Completion Rate</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="terminal-box">
            <div class="terminal-header">
                <div class="terminal-title">
                    <div class="status-indicator"></div>
                    <span>TASK FILTERS</span>
                </div>
                <button class="primary" onclick="openModal()">
                    <svg viewBox="0 0 24 24">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    NEW TASK
                </button>
            </div>
            <div class="controls">
                <div class="search-box">
                    <svg class="search-icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"/>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                    </svg>
                    <input type="text" id="search-input" placeholder="SEARCH TASKS...">
                </div>
                <select id="filter-status">
                    <option value="all">All Status</option>
                    <option value="todo">To Do</option>
                    <option value="progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="blocked">Blocked</option>
                </select>
                <select id="filter-priority">
                    <option value="all">All Priorities</option>
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                    <option value="critical">Critical</option>
                </select>
                <select id="filter-project">
                    <option value="all">All Projects</option>
                </select>
                <select id="sort-by">
                    <option value="dueDate">Sort: Due Date</option>
                    <option value="priority">Sort: Priority</option>
                    <option value="created">Sort: Created</option>
                    <option value="status">Sort: Status</option>
                </select>
            </div>
        </div>

        <!-- Task List -->
        <div class="terminal-box">
            <div class="terminal-header">
                <div class="terminal-title">
                    <div class="status-indicator"></div>
                    <span>TASK LIST</span>
                </div>
            </div>
            <div id="task-list" class="task-list"></div>
        </div>

        <footer>
            <p>TASKFLOW PRO &copy; 2026 | ENTERPRISE PROJECT MANAGEMENT</p>
        </footer>
    </div>

    <!-- Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">CREATE NEW TASK</h2>
                <button class="close-btn" onclick="closeModal()">
                    <svg viewBox="0 0 24 24">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <form id="task-form" onsubmit="saveTask(event)">
                <div class="form-group">
                    <label>Task Title</label>
                    <input type="text" id="task-title" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="task-description"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Status</label>
                        <select id="task-status">
                            <option value="todo">To Do</option>
                            <option value="progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="blocked">Blocked</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Priority</label>
                        <select id="task-priority">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Project</label>
                        <input type="text" id="task-project">
                    </div>
                    <div class="form-group">
                        <label>Assigned To</label>
                        <input type="text" id="task-assignee">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date" id="task-start">
                    </div>
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="date" id="task-due">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Estimated Hours</label>
                        <input type="number" id="task-estimated" min="0" step="0.5">
                    </div>
                    <div class="form-group">
                        <label>Actual Hours</label>
                        <input type="number" id="task-actual" min="0" step="0.5">
                    </div>
                </div>

                <div class="form-group">
                    <label>Tags (comma separated)</label>
                    <input type="text" id="task-tags" placeholder="frontend, urgent, bug-fix">
                </div>

                <div class="form-group">
                    <label>Progress (%)</label>
                    <input type="number" id="task-progress" min="0" max="100" value="0">
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="submit" class="primary">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17 21 17 13 7 13 7 21"/>
                            <polyline points="7 3 7 8 15 8"/>
                        </svg>
                        SAVE TASK
                    </button>
                    <button type="button" onclick="closeModal()">
                        <svg viewBox="0 0 24 24">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                        CANCEL
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let tasks = [];
        let editingTaskId = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadTasks();
            updateDashboard();
            renderTasks();
            updateCurrentDate();
            setInterval(updateCurrentDate, 1000);
        });

        function updateCurrentDate() {
            const now = new Date();
            document.getElementById('current-date').textContent = 
                `SYSTEM TIME: ${now.toLocaleString()}`;
        }

        function loadTasks() {
            const saved = localStorage.getItem('taskflow-pro-tasks');
            if (saved) {
                tasks = JSON.parse(saved);
            } else {
                tasks = [];
            }
        }

        function saveTasks() {
            localStorage.setItem('taskflow-pro-tasks', JSON.stringify(tasks));
        }

        function openModal(taskId = null) {
            editingTaskId = taskId;
            const modal = document.getElementById('task-modal');
            const modalTitle = document.getElementById('modal-title');
            
            if (taskId) {
                modalTitle.textContent = 'EDIT TASK';
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    document.getElementById('task-title').value = task.title;
                    document.getElementById('task-description').value = task.description || '';
                    document.getElementById('task-status').value = task.status;
                    document.getElementById('task-priority').value = task.priority;
                    document.getElementById('task-project').value = task.project || '';
                    document.getElementById('task-assignee').value = task.assignee || '';
                    document.getElementById('task-start').value = task.startDate || '';
                    document.getElementById('task-due').value = task.dueDate || '';
                    document.getElementById('task-estimated').value = task.estimatedHours || '';
                    document.getElementById('task-actual').value = task.actualHours || '';
                    document.getElementById('task-tags').value = task.tags ? task.tags.join(', ') : '';
                    document.getElementById('task-progress').value = task.progress || 0;
                }
            } else {
                modalTitle.textContent = 'CREATE NEW TASK';
                document.getElementById('task-form').reset();
            }
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('task-modal').classList.remove('active');
            editingTaskId = null;
        }

        function saveTask(event) {
            event.preventDefault();
            
            const task = {
                id: editingTaskId || Date.now(),
                title: document.getElementById('task-title').value,
                description: document.getElementById('task-description').value,
                status: document.getElementById('task-status').value,
                priority: document.getElementById('task-priority').value,
                project: document.getElementById('task-project').value,
                assignee: document.getElementById('task-assignee').value,
                startDate: document.getElementById('task-start').value,
                dueDate: document.getElementById('task-due').value,
                estimatedHours: parseFloat(document.getElementById('task-estimated').value) || 0,
                actualHours: parseFloat(document.getElementById('task-actual').value) || 0,
                tags: document.getElementById('task-tags').value.split(',').map(t => t.trim()).filter(t => t),
                progress: parseInt(document.getElementById('task-progress').value) || 0,
                created: editingTaskId ? tasks.find(t => t.id === editingTaskId).created : new Date().toISOString().split('T')[0]
            };

            if (editingTaskId) {
                const index = tasks.findIndex(t => t.id === editingTaskId);
                tasks[index] = task;
            } else {
                tasks.push(task);
            }

            saveTasks();
            updateDashboard();
            renderTasks();
            closeModal();
        }

        function deleteTask(taskId) {
            if (confirm('DELETE TASK? THIS ACTION CANNOT BE UNDONE.')) {
                tasks = tasks.filter(t => t.id !== taskId);
                saveTasks();
                updateDashboard();
                renderTasks();
            }
        }

        function toggleTaskStatus(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.status = task.status === 'completed' ? 'todo' : 'completed';
                task.progress = task.status === 'completed' ? 100 : task.progress;
                saveTasks();
                updateDashboard();
                renderTasks();
            }
        }

        function updateDashboard() {
            const total = tasks.length;
            const inProgress = tasks.filter(t => t.status === 'progress').length;
            const completed = tasks.filter(t => t.status === 'completed' || t.progress === 100).length;
            const overdue = tasks.filter(t => {
                if (!t.dueDate || t.status === 'completed' || t.progress === 100) return false;
                return new Date(t.dueDate) < new Date();
            }).length;

            document.getElementById('total-tasks').textContent = total;
            document.getElementById('progress-tasks').textContent = inProgress;
            document.getElementById('completed-tasks').textContent = completed;
            document.getElementById('overdue-tasks').textContent = overdue;
            document.getElementById('completion-rate').textContent = total > 0 
                ? Math.round((completed / total) * 100) + '%' 
                : '0%';

            // Update project filter
            const projects = [...new Set(tasks.map(t => t.project).filter(p => p))];
            const projectFilter = document.getElementById('filter-project');
            projectFilter.innerHTML = '<option value="all">All Projects</option>';
            projects.forEach(p => {
                const option = document.createElement('option');
                option.value = p;
                option.textContent = p;
                projectFilter.appendChild(option);
            });
        }

        function renderTasks() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const statusFilter = document.getElementById('filter-status').value;
            const priorityFilter = document.getElementById('filter-priority').value;
            const projectFilter = document.getElementById('filter-project').value;
            const sortBy = document.getElementById('sort-by').value;

            let filtered = tasks.filter(task => {
                const matchesSearch = task.title.toLowerCase().includes(searchTerm) || 
                                     (task.description && task.description.toLowerCase().includes(searchTerm));
                const matchesStatus = statusFilter === 'all' || task.status === statusFilter;
                const matchesPriority = priorityFilter === 'all' || task.priority === priorityFilter;
                const matchesProject = projectFilter === 'all' || task.project === projectFilter;
                
                return matchesSearch && matchesStatus && matchesPriority && matchesProject;
            });

            // Sort
            filtered.sort((a, b) => {
                switch(sortBy) {
                    case 'dueDate':
                        return new Date(a.dueDate || '9999-12-31') - new Date(b.dueDate || '9999-12-31');
                    case 'priority':
                        const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
                        return priorityOrder[a.priority] - priorityOrder[b.priority];
                    case 'created':
                        return new Date(b.created) - new Date(a.created);
                    case 'status':
                        const statusOrder = { blocked: 0, progress: 1, todo: 2, completed: 3 };
                        return statusOrder[a.status] - statusOrder[b.status];
                    default:
                        return 0;
                }
            });

            const taskList = document.getElementById('task-list');
            
            if (filtered.length === 0) {
                taskList.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 100 100" fill="none">
                            <rect x="20" y="30" width="60" height="50" stroke-width="2"/>
                            <line x1="30" y1="40" x2="70" y2="40" stroke-width="2"/>
                            <line x1="30" y1="50" x2="70" y2="50" stroke-width="2"/>
                            <line x1="30" y1="60" x2="70" y2="60" stroke-width="2"/>
                            <line x1="30" y1="70" x2="50" y2="70" stroke-width="2"/>
                        </svg>
                        <p>NO TASKS FOUND</p>
                        <p>Create a new task to get started</p>
                    </div>
                `;
                return;
            }

            taskList.innerHTML = filtered.map(task => {
                const isOverdue = task.dueDate && new Date(task.dueDate) < new Date() && task.status !== 'completed' && task.progress !== 100;
                const daysUntilDue = task.dueDate ? Math.ceil((new Date(task.dueDate) - new Date()) / (1000 * 60 * 60 * 24)) : null;
                
                return `
                    <div class="task-card ${isOverdue ? 'overdue' : ''} ${task.status === 'completed' || task.progress === 100 ? 'completed' : ''} priority-${task.priority}">
                        <div class="task-header">
                            <div>
                                <div class="task-title">${escapeHtml(task.title)}</div>
                                <div class="task-meta">
                                    <div class="meta-item">
                                        <span class="badge status-${task.status}">${task.status.toUpperCase()}</span>
                                    </div>
                                    <div class="meta-item">
                                        <span class="badge priority-${task.priority}">${task.priority.toUpperCase()}</span>
                                    </div>
                                    ${task.project ? `
                                        <div class="meta-item">
                                            <svg viewBox="0 0 24 24">
                                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                                            </svg>
                                            <span>${escapeHtml(task.project)}</span>
                                        </div>
                                    ` : ''}
                                    ${task.assignee ? `
                                        <div class="meta-item">
                                            <svg viewBox="0 0 24 24">
                                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                                <circle cx="12" cy="7" r="4"/>
                                            </svg>
                                            <span>${escapeHtml(task.assignee)}</span>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>

                        ${task.description ? `<div class="task-description">${escapeHtml(task.description)}</div>` : ''}

                        <div class="task-meta">
                            ${task.startDate ? `
                                <div class="meta-item">
                                    <svg viewBox="0 0 24 24">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                        <line x1="16" y1="2" x2="16" y2="6"/>
                                        <line x1="8" y1="2" x2="8" y2="6"/>
                                        <line x1="3" y1="10" x2="21" y2="10"/>
                                    </svg>
                                    <span>${task.startDate}</span>
                                </div>
                            ` : ''}
                            ${task.dueDate ? `
                                <div class="meta-item" style="color: ${isOverdue ? 'var(--danger)' : 'var(--matrix-green)'}">
                                    <svg viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"/>
                                        <polyline points="12 6 12 12 16 14"/>
                                    </svg>
                                    <span>
                                        ${task.dueDate}
                                        ${isOverdue ? ' [OVERDUE]' : daysUntilDue !== null ? ` [${daysUntilDue}d]` : ''}
                                    </span>
                                </div>
                            ` : ''}
                            ${task.estimatedHours ? `
                                <div class="meta-item">
                                    <svg viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"/>
                                        <polyline points="12 6 12 12 16 14"/>
                                    </svg>
                                    <span>${task.actualHours || 0}h / ${task.estimatedHours}h</span>
                                </div>
                            ` : ''}
                        </div>

                        ${task.tags && task.tags.length > 0 ? `
                            <div class="task-tags">
                                ${task.tags.map(tag => `
                                    <span class="tag">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
                                            <line x1="7" y1="7" x2="7.01" y2="7"/>
                                        </svg>
                                        ${escapeHtml(tag)}
                                    </span>
                                `).join('')}
                            </div>
                        ` : ''}

                        <div class="progress-section">
                            <div class="progress-header">
                                <span>PROGRESS</span>
                                <span>${task.progress}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${task.progress}%"></div>
                            </div>
                        </div>

                        <div class="task-actions">
                            <button onclick="toggleTaskStatus(${task.id})">
                                ${task.status === 'completed' ? `
                                    <svg viewBox="0 0 24 24">
                                        <polyline points="1 4 1 10 7 10"/>
                                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                                    </svg>
                                    REOPEN
                                ` : `
                                    <svg viewBox="0 0 24 24">
                                        <polyline points="20 6 9 17 4 12"/>
                                    </svg>
                                    COMPLETE
                                `}
                            </button>
                            <button onclick="openModal(${task.id})">
                                <svg viewBox="0 0 24 24">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                                EDIT
                            </button>
                            <button class="danger" onclick="deleteTask(${task.id})" style="border-color: var(--danger); color: var(--danger);">
                                <svg viewBox="0 0 24 24">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                DELETE
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Event listeners
        document.getElementById('search-input').addEventListener('input', renderTasks);
        document.getElementById('filter-status').addEventListener('change', renderTasks);
        document.getElementById('filter-priority').addEventListener('change', renderTasks);
        document.getElementById('filter-project').addEventListener('change', renderTasks);
        document.getElementById('sort-by').addEventListener('change', renderTasks);

        // Close modal on ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Click outside modal to close
        document.getElementById('task-modal').addEventListener('click', (e) => {
            if (e.target.id === 'task-modal') closeModal();
        });
    </script>
</body>
</html>